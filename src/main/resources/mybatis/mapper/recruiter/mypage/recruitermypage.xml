<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 기업 페이지 -->
<mapper namespace="com.pickmeup.jobstartup.recruiter.mypage.repository.RecruiterMyPageRepository">

    <!--기업 페이지: 회사 정보-->
    <select id="selectRecruiterInfo" resultType="com.pickmeup.jobstartup.recruiter.appmanagement.dto.AppManageDTO">
        <![CDATA[
        SELECT s.status_no, s.member_no, s.posting_no, s.first_pass, s.final_pass, s.interview_date, p.company_no,
                p.posting_title, p.posting_sdate, p.posting_edate
        FROM application_status s JOIN job_posting p
        ON s.posting_no = p.posting_no
        WHERE company_no = #{company_no}
        ]]>
    </select>

    <!--기업 페이지: 파일 - 저장된 로고 이름 확인 -->
    <select id="selectComLogoName" parameterType="int" resultType="com.pickmeup.jobstartup.recruiter.mypage.dto.RecruiterFileDTO">
        <![CDATA[
            SELECT logo_orgname, logo_savname
            FROM company
            WHERE company_no = #{company_no}
        ]]>
    </select>

    <!--기업 페이지: 파일 - 로고 수정(원본 삭제, 파일 업로드)-->
    <update id="updateComLogo" parameterType="com.pickmeup.jobstartup.recruiter.mypage.dto.RecruiterFileDTO">
        <![CDATA[
            UPDATE company
            SET logo_orgname = #{logo_orgname}, logo_savname = #{logo_savname}
            WHERE company_no = #{company_no}
        ]]>
    </update>

    <!--기업 페이지: calendar 조회(수정중)-->
    <select id="selectRecruCalendar" parameterType="com.pickmeup.jobstartup.recruiter.mypage.dto.RecruiterCalendarDTO" resultType="map">
        SELECT schedule_no, schedule_title, company_no, schedule_memo, schedule_start, schedule_end, textcolor, backgroundcolor, bordercolor
        FROM company_schedule
    </select>

    <!--기업 페이지: calendar 입력(수정중)-->
    <insert id="insertRecruCalendar" parameterType="com.pickmeup.jobstartup.recruiter.mypage.dto.RecruiterCalendarDTO">
        <![CDATA[
            INSERT INTO company_schedule(schedule_title, schedule_start, schedule_end, schedule_memo, company_no)
            VALUES(#{schedule_title}, #{schedule_start}, #{schedule_end}, #{schedule_memo}, #{company_no})
        ]]>
    </insert>

</mapper>