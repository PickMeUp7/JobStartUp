<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 기업 페이지 -->
<mapper namespace="com.pickmeup.jobstartup.recruiter.mypage.repository.RecruiterMyPageRepository">

    <!--기업 페이지: 회사 정보-->
    <select id="selectRecruiterInfo" resultType="com.pickmeup.jobstartup.recruiter.mypage.dto.RecruiterMyPageDTO">
        <![CDATA[
        SELECT company_no, member_no, company_name, company_hp, ceo_name, company_type,
                business_type_code, company_address_detail, company_site, listing_status,
                company_est, company_sales
        FROM company
        WHERE company_no = #{company_no}
        ]]>
    </select>

    <!--기업 페이지: 파일 - 저장된 로고 이름 확인 -->
    <select id="selectComLogoName" parameterType="int" resultType="com.pickmeup.jobstartup.recruiter.mypage.dto.RecruiterFileDTO">
        <![CDATA[
            SELECT logo_orgname, logo_savname
            FROM company
            WHERE company_no = #{company_no}
        ]]>
    </select>

    <!--기업 페이지: 파일 - 로고 수정(원본 삭제, 파일 업로드)-->
    <update id="updateComLogo" parameterType="com.pickmeup.jobstartup.recruiter.mypage.dto.RecruiterFileDTO">
        <![CDATA[
            UPDATE company
            SET logo_orgname = #{logo_orgname}, logo_savname = #{logo_savname}
            WHERE company_no = #{company_no}
        ]]>
    </update>

    <!--기업 페이지: calendar 조회 (수정 예정: 기업 맞춤)-->
    <!--WHERE company_no = #{company_no}-->
    <select id="selectRecruCalendar" parameterType="com.pickmeup.jobstartup.recruiter.mypage.dto.RecruiterCalendarDTO" resultType="map">
        <![CDATA[
            SELECT schedule_no, schedule_title, company_no, schedule_memo, schedule_start, schedule_end
            FROM company_schedule
        ]]>
    </select>

    <!--기업 페이지: calendar 입력-->
    <insert id="insertRecruCalendar" parameterType="com.pickmeup.jobstartup.recruiter.mypage.dto.RecruiterCalendarDTO">
        <![CDATA[
            INSERT INTO company_schedule(schedule_title, schedule_start, schedule_end, schedule_memo, company_no)
            VALUES(#{schedule_title}, #{schedule_start}, #{schedule_end}, #{schedule_memo}, #{company_no})
        ]]>
    </insert>

    <!--기업 페이지: calendar 수정(수정중)-->


    <!--기업 페이지: calendar 삭제(수정중)-->
    <delete id="deleteRecruCalendar" parameterType="com.pickmeup.jobstartup.recruiter.mypage.dto.RecruiterCalendarDTO">
        <![CDATA[
            DELETE company_schedule
            WHERE company_no = #{company_no} AND schedule_title = #{schedule_title} AND schedule_end = #{schedule_end}
        ]]>
    </delete>


    <!--기업 페이지: 1) 박람회 현황(Ajax) + pagination-->
<!--    <select id="getJobFairList" resultType="">





    </select>-->

    <!--기업 페이지: 2) 공고 관리(Ajax) + pagination-->
    <select id="getJobPostingList" resultType="com.pickmeup.jobstartup.recruiter.mypage.dto.RecruiterJobPostingDTO">
        <![CDATA[
            SELECT posting_no, posting_title, posting_sdate, posting_edate, isshow
            FROM JOB_POSTING
            WHERE company_no = 4
            ORDER BY posting_no DESC
        ]]>
    </select>

    <!--기업 페이지: 3) 지원자 관리(Ajax) + pagination-->
<!--    <select id="getAppList" resultType="">

    </select>-->

</mapper>